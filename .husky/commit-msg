#!/bin/sh

# Remove Co-Authored-By: Claude lines from commit messages
COMMIT_MSG_FILE=$1

# Remove any Co-Authored-By lines containing "Claude" or "Anthropic"
sed -i.bak '/Co-Authored-By:.*[Cc]laude/d' "$COMMIT_MSG_FILE"
sed -i.bak '/Co-Authored-By:.*[Aa]nthropic/d' "$COMMIT_MSG_FILE"

# Remove empty lines at the end of the file
sed -i.bak -e :a -e '/^\n*$/{$d;N;ba' -e '}' "$COMMIT_MSG_FILE"

# Clean up backup file
rm -f "$COMMIT_MSG_FILE.bak"
